<ion-content id="body" [fullscreen]="true">
  <ng-container *ngIf="$subscribers | async as subscribers">
    <ng-container *ngIf="$subscriber | async as selectedSubscriber">
      <ion-menu contentId="main-content">
        <ion-header>
          <ion-toolbar color="tertiary">
            <ion-title>{{'home.menu' | translate}}</ion-title>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <ion-accordion-group *ngIf="subscribers.length > 1">
            <ion-accordion value="first">
              <ion-item slot="header" color="light">
                <ion-label>{{'home.select-phone-number' | translate}}</ion-label>
              </ion-item>
              <div *ngFor="let subscriber of subscribers"
                   class="ion-padding phone-btn"
                   slot="content">
                <div class="cursor-pointer"
                     [ngClass]="selectedSubscriber.id === subscriber.id ? 'selected' : ''"
                     (click)="selectSubscriber(subscriber)">{{subscriber.msisdn}}</div>
              </div>
            </ion-accordion>
          </ion-accordion-group>
          <ion-list>
            <ion-item>
              <ion-label class="cursor-pointer" (click)="logout()">
                <ion-icon name="exit-outline"></ion-icon>
                {{'common.logout' | translate}}
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-content>
      </ion-menu>
      <div class="ion-page" id="main-content">
        <ion-header>
          <ion-toolbar>
            <ion-title>
              <a class="navbar-brand" href="index.html">
                <img src="assets/images/logo-esim.png" alt="1sim" width="100px">
              </a>
            </ion-title>
            <ion-buttons slot="end">
              <ion-menu-button></ion-menu-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-no-padding">
          <section class="section pt-0">
            <div class="container">
              <div class="row">
                <ng-container *ngIf="$packages | async as packages">
                    <app-widgets class="col-md-12"
                                 [selectedSubscriber]="selectedSubscriber"
                                 [selectedPackage]="selectedPackage"
                                 [selectedUsage]="selectedUsage"></app-widgets>
                  <app-data-chart class="col-md-6 text-center mb-1 mb-md-0"
                                  (onUsageSelected)="updateUsage($event)"
                                  [package]="selectedPackage"></app-data-chart>
                  <app-payment-processor class="col-md-6 align-self-center text-center text-md-left"
                                         [packages]="packages"
                                         (packageSelect)="updateWidgets($event)"
                                         (onDataAdd)="updateView()"></app-payment-processor>
                </ng-container>
              </div>
            </div>
          </section>

          <section class="call-to-action section bg-orange">
            <div class="container">
              <div class="row">
                <app-bring-your-ideas></app-bring-your-ideas>
              </div>
            </div>
          </section>
        </ion-content>
      </div>
    </ng-container>
  </ng-container>
</ion-content>
